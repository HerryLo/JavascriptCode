var httpUrl="http://118.25.39.245:8080",data=[],time=60,self={},states=!0,regState=!0,resultM=localStorage.getItem("_ResultModel")||"",_0x1d0a=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","","random","ceil","split","join","metadata","substr","source","uuid","event","slice"];function _getSend(){for(var a=[_0x1d0a[0],_0x1d0a[1],_0x1d0a[2],_0x1d0a[3],_0x1d0a[4],_0x1d0a[5],_0x1d0a[6],_0x1d0a[7],_0x1d0a[8],_0x1d0a[9],_0x1d0a[10],_0x1d0a[11],_0x1d0a[12],_0x1d0a[13],_0x1d0a[14],_0x1d0a[15],_0x1d0a[16],_0x1d0a[17],_0x1d0a[18],_0x1d0a[19],_0x1d0a[20],_0x1d0a[21],_0x1d0a[22],_0x1d0a[23],_0x1d0a[24],_0x1d0a[25],_0x1d0a[26],_0x1d0a[27],_0x1d0a[28],_0x1d0a[29],_0x1d0a[30],_0x1d0a[31],_0x1d0a[32],_0x1d0a[33],_0x1d0a[34],_0x1d0a[35]],t=_0x1d0a[36],e=0;e<15;e++){t+=a[Math[_0x1d0a[38]](35*Math[_0x1d0a[37]]())]}return(t=t[_0x1d0a[39]](_0x1d0a[36]))[3]=2,t[7]=5,t[10]=7,t[13]=1,t[_0x1d0a[40]](_0x1d0a[36])}function _send(a){var t=a[_0x1d0a[41]],e=a[_0x1d0a[41]][_0x1d0a[42]](0,1),d=a[_0x1d0a[43]][_0x1d0a[42]](-1),n=a[_0x1d0a[44]][_0x1d0a[42]](0,1),r=a[_0x1d0a[45]][_0x1d0a[42]](-1);function s(a,t){var e=a[_0x1d0a[46]](0,parseInt(t)+1);return a[_0x1d0a[46]](parseInt(t)+1)+e}return t=s(t=s(t=s(t=s(t,e),d),n),r)}function getSendCode(){$.ajax({url:httpUrl+"/api/app/borrow/order/sms/data",type:"POST",data:{number:_getSend()},success:function(a){self.data=a}})}function ajaxPost(){$.ajax({url:httpUrl+"/api/pc/recommend/smallloan/list",type:"POST",success:function(a){var t="";if(window._applyBtn=_applyBtn,"200"==a.resultCode){for(var e=(data=a.resultModel).length,d=0;d<e;d++)t+=htmlTemplet(data[d]);$("#card_conent").html(t);var n=Number($("#card_conent").height());if(resultM)Number(n);else Number(n);var r=Number(n)/16+2;$(".card_midl").attr("style","height:"+r+"rem;")}}})}function _applyBtn(a,t){var e=$(a).attr("data-id")||t;$.ajax({url:httpUrl+"/api/pc/apply/smallloan",type:"POST",data:{smallLoanId:e},headers:{"access-token":resultM||"",source:"4",channel:"duanxin"},success:function(a){200==a.resultCode?location.href=a.resultModel.url:alert(a.resultMessage)}})}function htmlTemplet(a){var t="";return t+='<div class="card_detail" onclick="_applyBtn(this)" data-id='+a.id+'><div class="detail"><div class="icon">',t+="<img src="+a.avatar+' alt=""><div class="name">'+a.name+"</div></div>",t+='<div class="type"><div class="quota">日利率: <i>'+a.ratio+'%</i></div><div class="money">额度: <i>'+a.minBorrowAmount+" - "+a.maxBorrowAmount+"</i></div></div>",t+='<div class="desc">'+a.materialState+"</div>",t+='</div><div class="line1"></div></div>'}function setInterValFun(){var a,t=$(".verCode-btn");clearInterval(a),a=setInterval(function(){if(0===time)return time=60,t.html("发送验证码"),clearInterval(a),void(states=!0);t.html("重新发送("+time+"s)"),time--},1e3)}function btnEvent(){$(".btn").click(function(){if(!regState)return!1;regState=!1;var e="https://myzc-open.oss-cn-hangzhou.aliyuncs.com/package/channel-duanxin/app-duanxin-release_100_jiagu_sign.apk";if(resultM)return!(location.href=e);$.ajax({url:httpUrl+"/api/pc/login",type:"POST",data:{mobile:$("#phoneNumber").val(),code:$("#verCode").val(),channel:"duanxin"},success:function(a){if(200==a.resultCode){var t=a.resultModel;regState=!0,location.href=e,$(".phone_isShow").hide(),localStorage.setItem("_ResultModel",t)}else alert(a.resultMessage)},error:function(){regState=!0}})}),$("#verCode-btn").on("touchstart",function(){if(!states)return!1;var a=$("#phoneNumber").val();""===a?alert("请填写您的手机号"):/^1[34578]\d{9}$/.test(a)?(console.log(self.data),$.ajax({url:httpUrl+"/api/app/borrow/order/sms/send",dataType:"html",type:"POST",data:{mobile:a,number:_send(self.data),sendForActivity:"borrowInviteActivity"},success:function(a){states=!1,setInterValFun()},error:function(){states=!0}})):alert("请填写正确的手机号")})}function init(){resultM||$(".phone_isShow").show(),getSendCode(),ajaxPost(),btnEvent()}init();